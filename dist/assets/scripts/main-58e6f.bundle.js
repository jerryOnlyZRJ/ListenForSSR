!function(t){function e(e){for(var n,s,o=e[0],u=e[1],l=e[2],d=0,f=[];d<o.length;d++)s=o[d],r[s]&&f.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(c&&c(e);f.length;)f.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var u=i[o];0!==r[u]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},r={2:0},a=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;a.push([79,1,0]),i()}([,,,,function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(3)),r=s(i(2)),a=s(i(27));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Register",methods:{registerHandler:function(){var t=this.$refs.username.value,e=this.$refs.password.value,i=this.$refs.confirm.value;if(t)if(e)if(e!==i)mui.toast("输入的密码不一致");else{var s=(0,a.default)(e);r.default.post("/user/register",{username:t,password:s}).then(function(e){e.data.state?mui.alert(e.data.msg,"注册失败"):(mui.toast("注册成功"),sessionStorage.setItem("username",t),setTimeout(function(){mui.openWindow({url:n.default.domain,id:"login"})},1e3))})}else mui.toast("密码不能为空");else mui.toast("账号不能为空")}}}},function(t,e,i){"use strict";i.r(e);var n=i(5),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(2)),r=s(i(27)),a=s(i(3));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Login",mounted:function(){var t=document.documentElement.clientHeight,e=document.querySelector(".register-btn");t>550&&(e.style.zIndex=1),window.addEventListener("resize",function(){var t=document.documentElement.clientHeight;e.style.zIndex=t<=550?-1:1});var i=sessionStorage.getItem("username"),n=localStorage.getItem("username");i?this.$refs.usernameInput.value=i:n&&(this.$refs.usernameInput.value=n)},methods:{takeATry:function(){localStorage.setItem("title","Try"),location.href=a.default.domain+"editor"},loginHandler:function(){var t=this.$refs.usernameInput.value,e=this.$refs.passwordInput.value;if(t)if(e){var i=(0,r.default)(e);n.default.post("/user/login",{username:t,password:i}).then(function(e){e.data.state?mui.alert(e.data.msg,"登录失败"):(mui.toast("登录成功"),localStorage.setItem("username",t),localStorage.getItem("hasEditorWithoutAccount")?setTimeout(function(){location.href=a.default.domain+"editor"},1e3):setTimeout(function(){mui.openWindow({url:a.default.domain+"dashboard",id:"dashboard"})},1e3))})}else mui.toast("密码不能为空");else mui.toast("账号不能为空")},registerHandler:function(){mui.openWindow({url:a.default.domain+"register",id:"register"})},pwdToggle:function(t){t.target.classList.toggle("active"),t.target.classList.contains("active")?t.target.parentNode.firstElementChild.type="text":t.target.parentNode.firstElementChild.type="password"}}}},function(t,e,i){"use strict";i.r(e);var n=i(8),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(3)),r=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Editor",components:{RemoteJs:{render:function(t){return t("script",{attrs:{type:"text/javascript",src:this.src}})},props:{src:{type:String,required:!0}}}},data:function(){return{title:""}},mounted:function(){var t=this,e=[!1,"SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","Arial","Times-New-Roman"],i=Quill.import("formats/font");i.whitelist=e,Quill.register(i,!0);var n=[!1,"3.5rem","3rem","2.125rem","2rem","1.8125rem","1.5rem","1.3125rem","1.25rem","1.125rem","1rem","0.875rem","0.75rem","0.625rem","0.5rem","0.4375rem","0.375rem"],r=Quill.import("attributors/style/size");r.whitelist=n,Quill.register(r,!0);var a=new Quill("#quill-container",{modules:{toolbar:[[{font:e},{size:n}],["bold","italic","underline",{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{direction:"rtl"},{align:[]}]]},theme:"snow"});window.quill=a,this.title=localStorage.getItem("title");var s=localStorage.getItem("content");s&&a.setContents(JSON.parse(s)),window.onbeforeunload=function(){localStorage.getItem("content")&&t.uploadUserWord()}},methods:{speechHandler:function(t){"stop"===t.target.dataset.state?(this.startRecognize(),t.target.dataset.state="speeching"):(this.stopRecognize(),t.target.dataset.state="stop")},startRecognize:function(){plus.speech.startRecognize({engine:"iFly",lang:"zh-cn",continue:!0},function(t){quill.insertText(quill.getLength(),t,quill.getFormat())},function(t){console.log(t)})},stopRecognize:function(){plus.speech.stopRecognize()},uploadUserWord:function(){var t=localStorage.getItem("username"),e=this.title,i=JSON.stringify(quill.getContents());if(t){var a=(new Date).toString();r.default.post("/user/updatewords",{user:t,title:e,date:a,content:i}).then(function(t){mui.toast("上传成功"),location.href=n.default.domain+"dashboard"}).catch(function(t){return console.log(t)})}else localStorage.setItem("hasEditorWithoutAccount",1),localStorage.setItem("content",i),mui.alert("未检测到账号，请重新登录","上传失败",function(){location.href=n.default.domain})}}}},function(t,e,i){"use strict";i.r(e);var n=i(11),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(3)),r=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:"DashBoard",data:function(){return{orginList:[],filterList:[]}},mounted:function(){var t=this,e=localStorage.getItem("username");r.default.get("/user/getwordlist?user="+e).then(function(e){t.orginList=e.data,t.filterList=e.data})},updated:function(){var t=this,e=document.querySelector(".word-list");if(e){var i=null;e.addEventListener("touchstart",function(e){e.preventDefault();var n=r(e.target);n?(n.classList.add("touch"),i=setTimeout(function(){clearTimeout(i),i=null},1e3)):t.clearTouchItem()},!1),e.addEventListener("touchend",function(e){var a=r(e.target);if(i){t.clearTouchItem();var s=a.dataset.index;localStorage.setItem("title",t.filterList[s].title),localStorage.setItem("content",t.filterList[s].content),location.href=n.default.domain+"editor"}else e.preventDefault();clearTimeout(i),i=null},!1)}function r(t){return"LI"===t.tagName?t:"UL"===t.tagName?"":r(t.parentNode)}},computed:{withoutWordItem:function(){return!this.orginList.toString()}},methods:{clearTouchItem:function(){var t=document.querySelector(".touch");t&&t.classList.remove("touch")},arrageDate:function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),a=e.getHours(),s=e.getMinutes();return i+"年"+n+"月"+r+"日"+a+":"+(s=s<10?"0"+s:s)},getWordTextContent:function(t){var e=JSON.parse(t);return e.ops?e.ops.map(function(t){return t.insert.replace(/\n/g,"")}).join(""):""},filterWordList:function(t){var e=t.target.value;this.filterList=this.orginList.filter(function(t){return t.title.indexOf(e)>=0})},makeAnewWord:function(t){var e=new Set(this.orginList.map(function(t){return t.title}));mui.prompt("您可以为您的新文档起个名字：","工作日志","创建文档",["确定","取消"],function(t){t.index||(e.has(t.value)?mui.alert("文档已存在","创建失败"):(mui.toast("创建成功"),setTimeout(function(){localStorage.setItem("title",t.value),localStorage.removeItem("content"),location.href=n.default.domain+"editor"},500)))})},deleteThisWord:function(t,e){var i=this;e.preventDefault(),e.stopPropagation(),this.clearTouchItem();var n=this.filterList[t].title,a={user:localStorage.getItem("username"),title:n};function s(t,e){r.default.post("/user/deleteword",e).then(function(e){e.data.n&&t()}).catch(function(t){return console.log(t)})}if(this.filterList===this.orginList)s(function(){mui.toast("删除"+n+"成功"),i.filterList.splice(t,1)},a);else{var o=this.orginList.indexOf(this.orginList.find(function(t){return t.title===n}));s(function(){mui.toast("删除"+n+"成功"),i.filterList.splice(t,1),i.orginList.splice(o,1)},a)}},quitLogin:function(){localStorage.removeItem("username"),localStorage.removeItem("content"),location.href=n.default.domain}}}},function(t,e,i){"use strict";i.r(e);var n=i(14),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},function(t,e,i){"use strict";i.r(e);var n=i(17),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e.default=r.a},,,,function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor"},[i("header",{staticClass:"mui-bar mui-bar-nav"},[i("h1",{staticClass:"mui-title"},[t._v(t._s(t.title))]),t._v(" "),i("a",{staticClass:"mui-action-menu mui-icon mui-icon-bars mui-pull-right",attrs:{id:"menu",href:"#topPopover"}})]),t._v(" "),i("div",{staticClass:"mui-popover",attrs:{id:"topPopover"}},[i("div",{staticClass:"mui-popover-arrow"}),t._v(" "),i("div",{staticClass:"mui-scroll-wrapper"},[i("div",{staticClass:"mui-scroll"},[i("ul",{staticClass:"mui-table-view"},[i("li",{staticClass:"mui-table-view-cell",on:{click:t.uploadUserWord}},[i("a",{attrs:{href:"#"}},[t._v("云存储")])])])])])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"speech-btn mui-icon mui-icon-mic",attrs:{"data-state":"stop"},on:{click:t.speechHandler}}),t._v(" "),i("RemoteJs",{attrs:{src:"https://cdn.bootcss.com/quill/1.3.6/quill.min.js"}})],1)},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mui-content"},[e("div",{attrs:{id:"quill-container"}})])}];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"register"},[t._m(0),t._v(" "),i("div",{staticClass:"mui-content"},[t._m(1),t._v(" "),i("div",{staticClass:"account-container"},[i("div",{staticClass:"username-container"},[i("input",{ref:"username",attrs:{type:"text",name:"",id:"username-input",placeholder:"用户名"}})]),t._v(" "),i("div",{staticClass:"password-container"},[i("input",{ref:"password",attrs:{type:"password",name:"",id:"password-input",placeholder:"密码"}})]),t._v(" "),i("div",{staticClass:"password-container"},[i("input",{ref:"confirm",attrs:{type:"password",name:"",id:"password-confirm",placeholder:"确认密码"}})])]),t._v(" "),i("button",{staticClass:"mui-btn mui-btn-blue mui-btn-block register-btn",attrs:{type:"button"},on:{click:t.registerHandler}},[t._v("立即注册")])])])},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"mui-bar mui-bar-nav"},[e("h1",{staticClass:"mui-title"},[this._v("ListenFor")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("figure",{staticClass:"app-logo"},[e("img",{staticClass:"app-logo-image",attrs:{src:i(28)}}),this._v(" "),e("span",{staticClass:"app-logo-title"},[this._v("高效智能的即时语音转文本工具")])])}];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[t._m(0),t._v(" "),i("div",{staticClass:"mui-content"},[i("span",{staticClass:"try-it mui-icon mui-icon-forward",on:{click:t.takeATry}},[t._v("立即体验")]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"account-container"},[i("div",{staticClass:"username-container"},[i("input",{ref:"usernameInput",attrs:{type:"text",name:"",id:"username-input",placeholder:"用户名"}})]),t._v(" "),i("div",{staticClass:"password-container"},[i("input",{ref:"passwordInput",attrs:{type:"password",name:"",id:"password-input",placeholder:"密码"}}),t._v(" "),i("span",{staticClass:"mui-icon mui-icon-eye login-pwdToggle",on:{click:t.pwdToggle}})])]),t._v(" "),i("button",{staticClass:"mui-btn mui-btn-blue mui-btn-block login-btn",attrs:{type:"button"},on:{click:t.loginHandler}},[t._v("登录")]),t._v(" "),i("button",{staticClass:"mui-btn mui-btn-blue mui-btn-outlined register-btn",attrs:{type:"button"},on:{click:t.registerHandler}},[t._v("立即注册")])])])},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"mui-bar mui-bar-nav"},[e("h1",{staticClass:"mui-title"},[this._v("ListenFor")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("figure",{staticClass:"app-logo"},[e("img",{staticClass:"app-logo-image",attrs:{src:i(28)}}),this._v(" "),e("span",{staticClass:"app-logo-title"},[this._v("高效智能的即时语音转文本工具")])])}];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dashboard"},[t._m(0),t._v(" "),i("div",{staticClass:"mui-content"},[i("div",{staticClass:"mui-input-row mui-search"},[i("input",{staticClass:"mui-input-clear",attrs:{type:"search",placeholder:"您可以搜索已存在的文档~"},on:{input:t.filterWordList}})]),t._v(" "),t.withoutWordItem?i("div",{staticClass:"empty-info"},[i("span",[t._v("文档列表空空如也,")]),i("span",[t._v("快点击右上角添加文档吧~")])]):i("ul",{staticClass:"word-list"},t._l(t.filterList,function(e,n){return i("li",{key:n,staticClass:"word-item",attrs:{"data-index":n}},[i("div",{staticClass:"word-title"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"modified-date"},[t._v(t._s(t.arrageDate(e.date)))]),t._v(" "),i("div",{staticClass:"word-content"},[t._v(t._s(t.getWordTextContent(e.content)))]),t._v(" "),i("div",{staticClass:"delete-thisword-container",on:{touchend:function(e){t.deleteThisWord(n,e)}}})])}))]),t._v(" "),i("div",{staticClass:"mui-popover",attrs:{id:"topPopover"}},[i("div",{staticClass:"mui-popover-arrow"}),t._v(" "),i("div",{staticClass:"mui-scroll-wrapper"},[i("div",{staticClass:"mui-scroll"},[i("ul",{staticClass:"mui-table-view"},[i("li",{staticClass:"mui-table-view-cell",on:{click:t.makeAnewWord}},[i("a",{attrs:{href:"#"}},[t._v("新建文档")])]),t._v(" "),i("li",{staticClass:"mui-table-view-cell",on:{click:t.quitLogin}},[i("a",{attrs:{href:"#"}},[t._v("退出登录")])])])])])])])},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"mui-bar mui-bar-nav"},[e("a",{staticClass:"mui-action-menu mui-icon mui-icon-plus mui-pull-right",attrs:{id:"menu",href:"#topPopover"}}),this._v(" "),e("h1",{staticClass:"mui-title"},[this._v("ListenFor")])])}];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},function(t,e,i){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"main"},[e("router-view")],1)])},r=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},,function(t,e,i){t.exports=i.p+"images/avatar-c6749.webp"},,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(4);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(23),r=i(6);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(41);var s=i(1),o=Object(s.a)(r.default,n.a,n.b,!1,null,"1077524e",null);o.options.__file="src/client/pages/Register/Register.vue",e.default=o.exports},,function(t,e,i){"use strict";var n=i(7);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(24),r=i(9);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(44);var s=i(1),o=Object(s.a)(r.default,n.a,n.b,!1,null,"94933266",null);o.options.__file="src/client/pages/Login/Login.vue",e.default=o.exports},,function(t,e,i){"use strict";var n=i(10);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(22),r=i(12);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(47);var s=i(1),o=Object(s.a)(r.default,n.a,n.b,!1,null,null,null);o.options.__file="src/client/pages/Editor/Editor.vue",e.default=o.exports},,function(t,e,i){"use strict";var n=i(13);i.n(n).a},,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var n=i(25),r=i(15);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(50);var s=i(1),o=Object(s.a)(r.default,n.a,n.b,!1,null,"4e8cb123",null);o.options.__file="src/client/pages/DashBoard/DashBoard.vue",e.default=o.exports},,,,function(t,e,i){"use strict";var n=i(16);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(26),r=i(18);for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i(73);var s=i(1),o=Object(s.a)(r.default,n.a,n.b,!1,null,null,null);o.options.__file="src/client/App.vue",e.default=o.exports},,,,,function(t,e,i){t.exports=i(78)}]);